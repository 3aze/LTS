!function(){"use strict";async function deleteMessages(e,t,i,n,r,s,o,a,d,l,c,u,h,p,g,m,v){const b=new Date;let f,x,w,y=0,k=0,E=0,H=0,I=0,_=-1;const wait=async e=>new Promise((t=>setTimeout(t,e))),msToHMS=e=>`${e/36e5|0}h ${e%36e5/6e4|0}m ${e%6e4/1e3|0}s`,redact=e=>{return`<span class="priv">${t=e,t.replace(/[&<"']/g,(e=>({"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#039;"}[e])))}</span><span class="mask">REDACTED</span>`;var t},printDelayStats=()=>L.verb(`Delete delay: ${p}ms, Search delay: ${h}ms`,`Last Ping: ${x}ms, Average Ping: ${0|f}ms`),toSnowflake=e=>/:/.test(e)?(new Date(e).getTime()-14200704e5)*Math.pow(2,22):e,L={debug(){return g?g("debug",arguments):void 0},info(){return g?g("info",arguments):void 0},verb(){return g?g("verb",arguments):void 0},warn(){return g?g("warn",arguments):void 0},error(){return g?g("error",arguments):void 0},success(){return g?g("success",arguments):void 0}};return L.success(`\nStarted at ${b.toLocaleString()}`),L.debug(`authorId="${redact(t)}" guildId="${redact(i)}" channelId="${redact(n)}" minId="${redact(r)}" maxId="${redact(s)}" hasLink=${!!a} hasFile=${!!d}`),v&&v(null,1),await async function recurse(){let g;g="@me"===i?`https://discord.com/api/v9/channels/${n}/messages/`:`https://discord.com/api/v9/guilds/${i}/messages/`;const D={Authorization:e};let M;v&&v(-1,1);try{const e=Date.now();M=await fetch(g+"search?"+(C=[["author_id",t||void 0],["channel_id",("@me"!==i?n:void 0)||void 0],["min_id",r?toSnowflake(r):void 0],["max_id",s?toSnowflake(s):void 0],["sort_by","timestamp"],["sort_order","desc"],["offset",I],["has",a?"link":void 0],["has",d?"file":void 0],["content",o||void 0],["include_nsfw",!!l||void 0]],C.filter((e=>void 0!==e[1])).map((e=>e[0]+"="+encodeURIComponent(e[1]))).join("&")),{headers:D}),x=Date.now()-e,f=f>0?.9*f+.1*x:x}catch(e){return L.error("Search request threw an error:",e)}var C;if(202===M.status){const e=1e3*(await M.json()).retry_after;return E++,H+=e,L.warn(`This channel wasn't indexed, waiting ${e}ms for discord to index it...`),await wait(e),await recurse()}if(!M.ok){if(429===M.status){const e=1e3*(await M.json()).retry_after;return E++,H+=e,h+=e,L.warn(`Being rate limited by the API for ${e}ms! Increasing search delay...`),printDelayStats(),L.verb(`Cooling down for ${2*e}ms before retrying...`),await wait(2*e),await recurse()}return L.error(`Error searching messages, API responded with status ${M.status}!\n`,await M.json())}let S;try{S=new RegExp(u)}catch(e){L.warn("Ignoring RegExp because pattern is malformed")}const A=await M.json(),T=A.total_results;w||(w=T);const P=A.messages.map((e=>e.find((e=>!0===e.hit)))),z=P.filter((e=>(0===e.type||e.type>=6&&e.type<=21||e.pinned&&c)&&(!S||e.content.match(S)))),V=P.filter((e=>!z.find((t=>t.id===e.id)))),end=()=>{L.success(`Ended at ${(new Date).toLocaleString()}! Total time: ${msToHMS(Date.now()-b.getTime())}`),printDelayStats(),L.verb(`Rate Limited: ${E} times. Total time throttled: ${msToHMS(H)}.`),L.debug(`Deleted ${y} messages, ${k} failed.\n`)},W=msToHMS(h*Math.round(T/25)+(p+f)*T);if(L.info(`Total messages found: ${A.total_results}`,`(Messages in current page: ${A.messages.length}, To be deleted: ${z.length}, System: ${V.length})`,`offset: ${I}`),printDelayStats(),L.verb(`Estimated time remaining: ${W}`),z.length>0||V.length>0){if(++_<1){if(L.verb("Waiting for your confirmation..."),!await(async e=>new Promise((t=>setTimeout((()=>t(window.confirm(e))),10))))(`Do you want to delete ~${T} messages?\nEstimated time: ${W}\n\n---- Preview ----\n`+z.map((e=>`${e.author.username}#${e.author.discriminator}: ${e.attachments.length?"[ATTACHMENTS]":e.content}`)).join("\n")))return end(L.error("Aborted by you!"));L.verb("OK")}for(let e=0;e<z.length;e++){const t=z[e];if(m&&m())return end(L.error("Stopped by you!"));let i;L.debug(`${((y+1)/w*100).toFixed(2)}% (${y+1}/${w})`,`Deleting ID:${redact(t.id)} <b>${redact(t.author.username+"#"+t.author.discriminator)} <small>(${redact(new Date(t.timestamp).toLocaleString())})</small>:</b> <i>${redact(t.content).replace(/\n/g,"â†µ")}</i>`,t.attachments.length?redact(JSON.stringify(t.attachments)):""),v&&v(y+1,w);try{const e=Date.now(),n=`https://discord.com/api/v9/channels/${t.channel_id}/messages/${t.id}`;i=await fetch(n,{headers:D,method:"DELETE"}),x=Date.now()-e,f=.9*f+.1*x,y++}catch(e){L.error("Delete request throwed an error:",e),L.verb("Related object:",redact(JSON.stringify(t))),k++}if(!i.ok)if(429===i.status){const t=1e3*(await i.json()).retry_after;E++,H+=t,p=t,L.warn(`Being rate limited by the API for ${t}ms! Adjusted delete delay to ${p}ms.`),printDelayStats(),L.verb(`Cooling down for ${2*t}ms before retrying...`),await wait(2*t),e--}else L.error(`Error deleting message, API responded with status ${i.status}!`,await i.json()),L.verb("Related object:",redact(JSON.stringify(t))),k++;await wait(p)}return V.length>0&&(w-=V.length,I+=V.length,L.verb(`Found ${V.length} system messages! Decreasing grandTotal to ${w} and increasing offset to ${I}.`)),L.verb(`Searching next messages in ${h}ms...`,I?`(offset: ${I})`:""),await wait(h),m&&m()?end(L.error("Stopped by you!")):await recurse()}return T-I>0&&L.warn("Ended because API returned an empty page."),end()}()}class Drag{constructor(e,t,i){this.options=Object.assign({mode:"move",minWidth:200,maxWidth:Infinity,minHeight:100,maxHeight:Infinity,xAxis:!0,yAxis:!0,draggingClass:"drag",useMouseEvents:!0,useTouchEvents:!0},i),this.minWidth=this.options.minWidth,this.maxWidth=this.options.maxWidth,this.minHeight=this.options.minHeight,this.maxHeight=this.options.maxHeight,this.xAxis=this.options.xAxis,this.yAxis=this.options.yAxis,this.draggingClass=this.options.draggingClass,this._targetElm=e,this._handleElm=t;const n="move"===this.options.mode?(e,t)=>{let i=e-s;e-s<0?i=0:e-a>d&&(i=d-this._targetElm.clientWidth);let n=t-r;t-r<0?n=0:t-o>l&&(n=l-this._targetElm.clientHeight),this.xAxis&&(this._targetElm.style.left=`${i}px`),this.yAxis&&(this._targetElm.style.top=`${n}px`)}:(e,t)=>{let i=e-this._targetElm.offsetLeft-a;e-a>d?i=Math.min(d-this._targetElm.offsetLeft,this.maxWidth):e-a-this._targetElm.offsetLeft>this.maxWidth?i=this.maxWidth:e-a-this._targetElm.offsetLeft<this.minWidth&&(i=this.minWidth);let n=t-this._targetElm.offsetTop-o;t-o>l?n=Math.min(l-this._targetElm.offsetTop,this.maxHeight):t-o-this._targetElm.offsetTop>this.maxHeight?n=this.maxHeight:t-o-this._targetElm.offsetTop<this.minHeight&&(n=this.minHeight),this.xAxis&&(this._targetElm.style.width=`${i}px`),this.yAxis&&(this._targetElm.style.height=`${n}px`)};let r,s,o,a,d=window.innerWidth,l=window.innerHeight;this._dragStartHandler=function dragStartHandler(e){const t="touchstart"===e.type;if(1===e.buttons||1===e.which||t){e.preventDefault();const i=t?e.touches[0].clientX:e.clientX,n=t?e.touches[0].clientY:e.clientY,c=this._targetElm.getBoundingClientRect();r=n-c.y,s=i-c.x,o=n-(c.y+c.height),a=i-(c.x+c.width),d=window.innerWidth,l=window.innerHeight,this.options.useMouseEvents&&(document.addEventListener("mousemove",this._dragMoveHandler),document.addEventListener("mouseup",this._dragEndHandler)),this.options.useTouchEvents&&(document.addEventListener("touchmove",this._dragMoveHandler,{passive:!1}),document.addEventListener("touchend",this._dragEndHandler)),this._targetElm.classList.add(this.draggingClass)}}.bind(this),this._dragMoveHandler=function dragMoveHandler(e){let t,i;if(e.preventDefault(),"touchmove"===e.type){const n=e.touches[0];t=n.clientX,i=n.clientY}else{if(1!==(e.buttons||e.which))return void this._dragEndHandler();t=e.clientX,i=e.clientY}n(t,i)}.bind(this),this._dragEndHandler=function dragEndHandler(e){this.options.useMouseEvents&&(document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)),this.options.useTouchEvents&&(document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler)),this._targetElm.classList.remove(this.draggingClass)}.bind(this),this.enable()}enable(){this.options.useMouseEvents&&this._handleElm.addEventListener("mousedown",this._dragStartHandler),this.options.useTouchEvents&&this._handleElm.addEventListener("touchstart",this._dragStartHandler,{passive:!1})}destroy(){this._targetElm.classList.remove(this.draggingClass),this.options.useMouseEvents&&(this._handleElm.removeEventListener("mousedown",this._dragStartHandler),document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)),this.options.useTouchEvents&&(this._handleElm.removeEventListener("touchstart",this._dragStartHandler),document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler))}}function createElm(e){const t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.firstElementChild)}function insertCss(e){const t=document.createElement("style");return t.appendChild(document.createTextNode(e)),document.head.appendChild(t),t}const e={init(){insertCss("")},grab:e=>new Promise(((t,i)=>{document.body.classList.add("undiscord-pick-message"),e&&document.body.classList.add(e),document.addEventListener("click",(function clickHandler(i){const n=i.target.closest('[id^="message-content-"]');if(n){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),e&&document.body.classList.remove(e),document.body.classList.remove("undiscord-pick-message"),document.removeEventListener("click",clickHandler);try{t(n.id.match(/message-content-(\d+)/)[1])}catch(i){t(null)}}}))}))};var t=e;function getGuildId(){const e=location.href.match(/channels\/([\w@]+)\/(\d+)/);if(e)return e[1];alert("Could not the Guild ID!\nPlease make sure you are on a Server or DM.")}function getChannelId(){const e=location.href.match(/channels\/([\w@]+)\/(\d+)/);if(e)return e[2];alert("Could not the Channel ID!\nPlease make sure you are on a Channel or DM.")}window.messagePicker=e;const $=e=>i.querySelector(e);let i,n;let r=!1;const stopHndl=()=>r;async function start(){r=!1;const e=function getToken(){window.dispatchEvent(new Event("beforeunload"));const e=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage;return JSON.parse(e.token)}(),t=$("input#authorId").value.trim(),i=$("input#guildId").value.trim(),s=$("input#channelId").value.trim().split(/\s*,\s*/),o=$("input#includeNsfw").checked,a=$("input#search").value.trim(),d=$("input#hasLink").checked,l=$("input#hasFile").checked,c=$("input#includePinned").checked,u=$("input#pattern").value,h=$("input#minId").value.trim(),p=$("input#maxId").value.trim(),g=$("input#minDate").value.trim(),m=$("input#maxDate").value.trim(),v=parseInt($("input#searchDelay").value.trim()),b=parseInt($("input#deleteDelay").value.trim()),f=$("#progressBar"),x=n.querySelector("progress"),w=$("#progressPercent"),onProg=(e,t)=>{e&&t&&e>t&&(t=e),f.setAttribute("max",t),x.setAttribute("max",t),f.value=e,x.value=e,f.style.display=t?"":"none",x.style.display=t?"":"none",w.style.display=e&&t?"":"none",w.innerHTML=e>=0&&t?Math.round(e/t*100)+"%":"",-1===e&&(f.removeAttribute("value"),x.removeAttribute("value"),w.innerHTML="...")};let y=$("#logArea"),k=$("#autoScroll");const logger=(e="",t)=>{const i={"":"",info:"color:#00b0f4;",verb:"color:#72767d;",warn:"color:#faa61a;",error:"color:#f04747;",success:"color:#43b581;"}[e];y.insertAdjacentHTML("beforeend",`<div style="${i}">${Array.from(t).map((e=>"object"==typeof e?JSON.stringify(e,e instanceof Error&&Object.getOwnPropertyNames(e)):e)).join("\t")}</div>`),k.checked&&y.querySelector("div:last-child").scrollIntoView(!1)};if(y.innerHTML="",!e)return logger("error",["Could not detect the authorization token!"])||logger("info",["Please make sure Undiscord is up to date"]);if(!i)return logger("error",["You must provide a Server ID!"]);for(let n=0;n<s.length;n++)$("#start").disabled=!0,$("#stop").disabled=!1,await deleteMessages(e,t,i,s[n],h||g,p||m,a,d,l,o,c,u,v,b,logger,stopHndl,onProg),stop()}function stop(){r=!0,$("#start").disabled=!1,$("#stop").disabled=!0,$("#progressBar").style.display="none",$("#progressPercent").style.display="none",n.querySelector("progress").style.display="none"}!function initUI(){insertCss("#undiscord.browser{box-shadow:var(--elevation-stroke),var(--elevation-high);overflow:hidden}#undiscord .container,#undiscord.container{background-color:var(--background-secondary);border-radius:8px;box-sizing:border-box;cursor:default;flex-direction:column}#undiscord .header{background-color:var(--background-tertiary);height:48px;align-items:center;min-height:48px;padding:0 16px;display:flex;color:var(--header-secondary)}#undiscord .header .icon{color:var(--interactive-normal);margin-right:8px;flex-shrink:0;width:24;height:24}#undiscord .header .icon:hover{color:var(--interactive-hover)}#undiscord .header h3{font-size:16px;line-height:20px;font-weight:500;font-family:var(--font-display);color:var(--header-primary);flex-shrink:0;margin-right:16px}#undiscord .header .spacer,#undiscord .multiInput :first-child{flex-grow:1}#undiscord .header .vert-divider{width:1px;height:24px;background-color:var(--background-modifier-accent);margin-right:16px;flex-shrink:0}#undiscord label,#undiscord legend{display:block;width:100%;color:var(--header-secondary);font-size:12px;line-height:16px;font-weight:500;text-transform:uppercase;cursor:default;font-family:var(--font-display);margin-bottom:8px}#undiscord .input-wrapper,#undiscord .multiInput{display:flex;align-items:center;font-size:16px;box-sizing:border-box;width:100%;border-radius:3px;color:var(--text-normal);background-color:var(--input-background);border:none;transition:border-color .2s ease-in-out}#undiscord .multiInput button:last-child{margin-right:4px}#undiscord .input,#undiscord input[type=datetime-local],#undiscord input[type=number],#undiscord input[type=password],#undiscord input[type=search],#undiscord input[type=text]{font-size:16px;box-sizing:border-box;width:100%;border-radius:3px;color:var(--text-normal);background-color:var(--input-background);border:none;transition:border-color .2s ease-in-out;padding:10px;height:40px}#undiscord fieldset{margin-top:16px}#undiscord .divider,#undiscord hr{border:none;margin-bottom:24px;padding-bottom:4px;border-bottom:1px solid var(--background-modifier-accent)}#undiscord .sectionDescription{margin-bottom:16px;color:var(--header-secondary);font-size:14px;line-height:20px;font-weight:400}#undiscord a{color:var(--text-link);text-decoration:none}#undiscord .btn,#undiscord button{position:relative;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;box-sizing:border-box;background:0 0;border:none;border-radius:3px;font-size:14px;font-weight:500;line-height:16px;padding:2px 16px;user-select:none;width:60px;height:32px;min-width:60px;min-height:32px;color:#fff;background-color:var(--button-secondary-background)}#undiscord .sizeMedium{width:96px;height:38px;min-width:96px;min-height:38px}#undiscord .accent{background-color:var(--brand-experiment)}#undiscord .danger{background-color:var(--button-danger-background)}#undiscord .positive{background-color:var(--button-positive-background)}#undiscord .info{font-size:12px;line-height:16px;padding:8px 10px;color:var(--text-muted)}#undiscord .scroll::-webkit-scrollbar{width:8px;height:8px}#undiscord .scroll::-webkit-scrollbar-corner{background-color:transparent}#undiscord .scroll::-webkit-scrollbar-thumb{background-clip:padding-box;border:2px solid transparent;border-radius:4px;background-color:var(--scrollbar-thin-thumb);min-height:40px}#undiscord .scroll::-webkit-scrollbar-track{border-color:var(--scrollbar-thin-track);background-color:var(--scrollbar-thin-track);border:2px solid var(--scrollbar-thin-track)}#undiscord .scroll::-webkit-scrollbar-thumb,#undiscord .scroll::-webkit-scrollbar-track{visibility:hidden}#undiscord .scroll:hover::-webkit-scrollbar-thumb,#undiscord .scroll:hover::-webkit-scrollbar-track{visibility:visible}"),insertCss("#undicord-btn,#undiscord summary{position:relative;cursor:pointer;color:var(--interactive-normal)}#undicord-btn{width:auto;height:24px;margin:0 8px;flex:0 0 auto}#undicord-btn progress{position:absolute;top:7px;left:5px;width:14px;height:14px}#undiscord{position:fixed;z-index:99;top:44px;right:10px;display:flex;flex-direction:column;width:800px;height:80vh;min-width:610px;max-width:100vw;min-height:448px;max-height:100vh;color:var(--text-normal);border-radius:4px;background-color:var(--background-secondary);box-shadow:var(--elevation-stroke),var(--elevation-high);will-change:top,left,width,height}#undiscord .header .icon{cursor:pointer}#undiscord .window-body{height:calc(100% - 48px)}#undiscord .sidebar{overflow:hidden scroll;overflow-y:auto;width:270px;min-width:250px;height:100%;max-height:100%;padding:8px;background:var(--background-secondary)}#undiscord .main{display:flex;max-width:calc(100% - 250px);background-color:var(--background-primary);flex-grow:1}#undiscord #logArea{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:.75rem;overflow:auto;padding:10px;user-select:text;flex-grow:1;flex-grow:1}#undiscord .tbar{padding:8px;background-color:var(--background-secondary-alt)}#undiscord .tbar button{margin-right:4px;margin-bottom:4px}#undiscord .footer{cursor:se-resize}#undiscord summary{font-size:16px;font-weight:500;line-height:20px;overflow:hidden;margin-bottom:2px;padding:6px 10px;white-space:nowrap;text-overflow:ellipsis;border-radius:4px;flex-shrink:0}#undiscord fieldset{padding-left:8px}#undiscord legend a{float:right;text-transform:initial}#undiscord progress{height:8px;margin-top:4px;flex-grow:1}#undiscord.redact .priv,#undiscord:not(.redact) .mask{display:none!important}#undiscord.redact [priv]{-webkit-text-security:disc!important}#undiscord :disabled{display:none}#undiscord,#undiscord *{box-sizing:border-box}#undiscord .col{display:flex;flex-direction:column}#undiscord .row{display:flex;flex-direction:row;align-items:center}#undiscord .mb1{margin-bottom:8px}");const e=function replaceInterpolations(e,t,i=!1){return e.replace(/\{\{([\w_]+)\}\}/g,((e,n)=>t[n]||(i?"":e)))}('<div class="browser container redact"id=undiscord style=display:none><div class=header><svg aria-hidden=false height=24 viewBox="0 0 24 24"width=24 class=icon><path d="M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"fill=currentColor></path><path d="M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z"fill=currentColor></path></svg><h3>Undiscord</h3><div class=vert-divider></div><span>Bulk delete messages</span><div class=spacer></div><div class=icon id=hide aria-label=Close role=button tabindex=0><svg aria-hidden=false height=24 viewBox="0 0 24 24"width=24><path d="M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"fill=currentColor></path></svg></div></div><div class=window-body style=display:flex;flex-direction:row><div class="scroll sidebar"><details open><summary>General</summary><fieldset><legend>Author ID</legend><div class=multiInput><div class=input-wrapper><input id=authorId class=input priv></div><button id=getAuthor>me</button></div></fieldset><hr><fieldset><legend>Server ID</legend><div class=multiInput><div class=input-wrapper><input id=guildId class=input priv></div><button id=getGuild>current</button></div></fieldset><fieldset><legend>Channel ID</legend><div class="multiInput mb1"><div class=input-wrapper><input id=channelId class=input priv></div><button id=getChannel>current</button></div><div class=sectionDescription><label class=row><input id=includeNsfw type=checkbox>This is a NSFW channel</label></div></fieldset></details><hr><details><summary>Filter</summary><fieldset><legend>Search</legend><div class=input-wrapper><input id=search placeholder="Containing text"priv></div><div class=sectionDescription>Only delete messages that contain the text</div><div class=sectionDescription><label><input id=hasLink type=checkbox>has: link</label></div><div class=sectionDescription><label><input id=hasFile type=checkbox>has: file</label></div><div class=sectionDescription><label><input id=includePinned type=checkbox>Include pinned</label></div></fieldset><hr><fieldset><legend>Pattern</legend><div class=sectionDescription>Delete messages that match the regular expression</div><div class=input-wrapper><span class=info>/</span> <input id=pattern placeholder="regular expression"priv> <span class=info>/</span></div></fieldset></details><details><summary>Messages interval</summary><fieldset><legend>Interval of messages</legend><div class="multiInput mb1"><div class=input-wrapper><input id=minId placeholder="After a message"priv></div><button id=pickMessageAfter>select</button></div><div class=multiInput><div class=input-wrapper><input id=maxId placeholder="Before a message"priv></div><button id=pickMessageBefore>select</button></div><div class=sectionDescription>Specify an interval to delete messages.</div></fieldset></details><details><summary>Date</summary><fieldset><legend>After date</legend><div class="input-wrapper mb1"><input id=minDate type=datetime-local title="Messages posted AFTER this date"></div><legend>Before date</legend><div class=input-wrapper><input id=maxDate type=datetime-local title="Messages posted BEFORE this date"></div><div class=sectionDescription>Delete messages that were posted between the two dates.</div><div class=sectionDescription>* Filtering by date doesn\'t work if you use the "Messages interval".</div></fieldset></details><hr><details><summary>Advanced settings</summary><fieldset><legend>Search delay</legend><div class=input-wrapper><input id=searchDelay type=number step=100 value=100></div></fieldset><fieldset><legend>Delete delay</legend><div class=input-wrapper><input id=deleteDelay type=number step=100 value=150></div><br><div class=sectionDescription>This will affect the speed in which the messages are deleted. Use the help link for more information.</div></fieldset></details><hr><div></div><div class=info>Build in {{VERSION}}</div></div><div class="col main"><div class="col tbar"><div class=row><button id=start class="sizeMedium accent">Start</button> <button id=stop class="sizeMedium danger"disabled>Stop</button> <button id=clear class=sizeMedium>Clear log</button> <label class=row title="Hide sensitive information on your screen for taking screenshots"><input id=redact type=checkbox checked> Streamer mode</label></div><div class=row><progress id=progressBar value=-1></progress></div></div><pre class="scroll logarea"id=logArea>\n                <center>\n                </center>\n            </pre><div class="row footer tbar"><label><input id=autoScroll type=checkbox checked> Auto scroll</label> <span id=progressPercent></span></div></div></div></div>',{VERSION:"5.0.3",HOME:"https://github.com/networkysh",WIKI:"https://github.com/networkysh"});function mountBtn(){const e=document.querySelector("#app-mount [class^=toolbar]");e&&e.appendChild(n)}i=createElm(e),document.body.appendChild(i),new Drag(i,$(".header"),{mode:"move"}),new Drag(i,$(".footer"),{mode:"resize"}),n=createElm('<div aria-label="Delete Messages"id=undicord-btn role=button tabindex=0 title="Delete Messages with Undiscord"><svg aria-hidden=false height=24 viewBox="0 0 24 24"width=24><path d="M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"fill=currentColor></path><path d="M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z"fill=currentColor></path></svg><progress style=display:none></progress></div>'),n.onclick=toggleWindow,mountBtn();const r=document.querySelector("#app-mount");let s=null;function toggleWindow(){"none"!==i.style.display?(i.style.display="none",n.style.color="var(--interactive-normal)"):(i.style.display="",n.style.color="var(--interactive-active)")}new MutationObserver(((e,t)=>{s||(s=setTimeout((()=>{s=null,r.contains(n)||mountBtn()}),3e3))})).observe(r,{attributes:!1,childList:!0,subtree:!0}),t.init(),$("#hide").onclick=toggleWindow,$("button#start").onclick=start,$("button#stop").onclick=stop,$("button#clear").onclick=()=>$("#logArea").innerHTML="",$("button#getAuthor").onclick=()=>$("input#authorId").value=function getAuthorId(){const e=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage;return JSON.parse(e.user_id_cache)}(),$("button#getGuild").onclick=()=>{"@me"===($("input#guildId").value=getGuildId())&&($("input#channelId").value=getChannelId())},$("button#getChannel").onclick=()=>{$("input#channelId").value=getChannelId(),$("input#guildId").value=getGuildId()},$("#redact").onchange=()=>{i.classList.toggle("redact")&&alert("This mode will attempt to hide personal information, so you can screen share / take screenshots.\nAlways double check you are not sharing sensitive information!")},$("#pickMessageAfter").onclick=async()=>{const e=await t.grab("after");e&&($("input#minId").value=e)},$("#pickMessageBefore").onclick=async()=>{const e=await t.grab("before");e&&($("input#maxId").value=e)}}()}();
